@page
@using Microsoft.AspNetCore.Identity;
@using kampong_goods.Models;

@inject SignInManager<AppUser> SignInManager
@inject UserManager<AppUser> UserManager
@model kampong_goods.Pages.Products.CatalogueModel
@{
	AppUser user = await UserManager.GetUserAsync(HttpContext.User); //current signed in
	var custlist = await UserManager.GetUsersInRoleAsync("Customer"); //gets users list
}

<header class="mb-3">
	<div class="form-inline">
		<strong class="mr-md-auto">1 Items found </strong>
		<select class="mr-2 form-control">
			<option>Latest items</option>
			<option>Trending</option>
			<option>Most Popular</option>
			<option>Cheapest</option>
		</select>
		<div class="btn-group">
			<a href="#" class="btn btn-light active" data-toggle="tooltip" title="List view">
				<i class="fa fa-bars"></i>
			</a>
			<a href="#" class="btn btn-light" data-toggle="tooltip" title="Grid view">
				<i class="fa fa-th"></i>
			</a>
		</div>
	</div>
</header><!-- sect-heading -->

<div class="row">
	@{
		@foreach (var item in Model.ProductList)
		{
			<div class="col-md-3">
				<figure class="card card-product-grid">
					<div class="img-wrap">
						<span class="badge badge-danger"> NEW </span>
						<img src="@item.ImageURL">
					</div> <!-- img-wrap.// -->
					<figcaption class="info-wrap">
						<a href="#" class="title mb-2">@item.ProductName</a>
						<div class="price-wrap">
							<span class="price">$@item.Price</span>
						</div> <!-- price-wrap.// -->

						<hr>

						<p class="mb-3">
							<span class="tag"> @item.CategoryId </span>
							<span class="tag"> @item.ConditionId </span>
						</p>

						<hr>

						@foreach (var cust in custlist) //use userid to get user name
						{
							if (item.UserId == cust.Id)
							{
								<p class="text-muted ">Seller: @cust.UserName</p>
							}
						}

						<a href="#" class="btn btn-outline-primary btn-block">  Chat </a>
						<a href="#" class="btn btn-success btn-block">  Buy </a>

					</figcaption>
				</figure>
			</div> <!-- col.// -->
		}
	}
</div>

<nav class="mb-4" aria-label="Page navigation sample">
	<ul class="pagination">
		<li class="page-item disabled"><a class="page-link" href="#">Previous</a></li>
		<li class="page-item active"><a class="page-link" href="#">1</a></li>
		<li class="page-item"><a class="page-link" href="#">2</a></li>
		<li class="page-item"><a class="page-link" href="#">3</a></li>
		<li class="page-item"><a class="page-link" href="#">4</a></li>
		<li class="page-item"><a class="page-link" href="#">5</a></li>
		<li class="page-item"><a class="page-link" href="#">Next</a></li>
	</ul>
</nav>
